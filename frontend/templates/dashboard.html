<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Show Analytics Dashboard - Clean & Fast</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Clean modular JavaScript structure -->
    <script src="{{ url_for('static', filename='js/modules/api-client.js') }}"></script>
    <script src="{{ url_for('static', filename='js/modules/chart-manager.js') }}"></script>

    <script src="{{ url_for('static', filename='js/modules/venmo-manager.js') }}"></script>
    <script src="{{ url_for('static', filename='js/modules/data-manager.js') }}"></script>
    <script src="{{ url_for('static', filename='js/modules/ui-manager.js') }}"></script>
    <script src="{{ url_for('static', filename='js/modules/comedian-manager.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main-dashboard.js') }}"></script>
    <style>
        body {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 14px;
            color: #ffffff;
            min-height: 100vh;
        }

        .navbar {
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #2d2d2d 100%);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            padding: 0.5rem 0;
            border-bottom: 2px solid #ff6b35;
        }

        .card {
            border: none;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            margin-bottom: 15px;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #2d2d2d 0%, #1a1a1a 100%);
            border: 1px solid #404040;
        }

        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(255, 107, 53, 0.2);
        }

        .card[style*="cursor: pointer"]:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(255, 107, 53, 0.3);
            border-color: #ff6b35;
        }

        .stat-card {
            background: linear-gradient(135deg, #ff6b35 0%, #e55a2b 100%);
            color: white;
            padding: 15px;
            border: 2px solid #ff6b35;
        }

        .revenue-card {
            background: linear-gradient(135deg, #c0392b 0%, #a93226 100%);
            color: white;
            padding: 15px;
            border: 2px solid #c0392b;
        }

        .tickets-card {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 15px;
            border: 2px solid #34495e;
        }

        .venue-cost-card {
            background: linear-gradient(135deg, #8e44ad 0%, #9b59b6 100%);
            color: white;
            padding: 15px;
            border: 2px solid #8e44ad;
        }

        .net-revenue-card {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            padding: 15px;
            border: 2px solid #27ae60;
        }

        .comedian-cost-card {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            padding: 15px;
            border: 2px solid #e74c3c;
        }

        .chart-container {
            position: relative;
            height: 250px;
            margin: 10px 0;
        }

        .compact-chart {
            height: 200px;
        }

        .loading {
            text-align: center;
            color: #bdc3c7;
            font-style: italic;
            padding: 20px;
        }

        .error {
            color: #e74c3c;
            background: linear-gradient(135deg, #2d1b1b 0%, #1a1a1a 100%);
            border: 1px solid #c0392b;
            border-radius: 8px;
            padding: 10px;
            margin: 10px 0;
            font-size: 13px;
        }

        .form-section {
            background: linear-gradient(135deg, #2d2d2d 0%, #1a1a1a 100%);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            border: 1px solid #404040;
        }

        .form-label {
            color: #ecf0f1;
            font-weight: 500;
        }

        .form-select {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            border: 2px solid #404040;
            color: #ecf0f1;
            border-radius: 8px;
        }

        .form-select:focus {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            border-color: #ff6b35;
            color: #ecf0f1;
            box-shadow: 0 0 15px rgba(255, 107, 53, 0.3);
        }

        .form-select option {
            background: #1a1a1a;
            color: #ecf0f1;
        }

        .compact-card {
            padding: 10px 15px;
        }

        .stat-number {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 5px 0;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .stat-label {
            font-size: 0.85rem;
            opacity: 0.9;
        }

        .chart-title {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #ecf0f1;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }

        .show-header {
            padding: 10px 15px;
            background: linear-gradient(135deg, #2d2d2d 0%, #1a1a1a 100%);
            border-radius: 8px;
            margin-bottom: 15px;
            border: 1px solid #ff6b35;
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.1);
        }

        .show-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin: 0;
            color: #ff6b35;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }

        .show-subtitle {
            font-size: 0.85rem;
            color: #bdc3c7;
            margin: 0;
        }

        .container {
            max-width: 1200px;
        }

        .row {
            margin-bottom: 10px;
        }

        .modal-content {
            background: linear-gradient(135deg, #2d2d2d 0%, #1a1a1a 100%);
            border: 2px solid #404040;
            color: #ecf0f1;
        }

        .modal-header {
            border-bottom: 2px solid #ff6b35;
            background: linear-gradient(135deg, #1a1a1a 0%, #000000 100%);
        }

        .modal-title {
            color: #ff6b35;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }

        .btn-close {
            filter: invert(1);
        }

        .table-dark {
            background: linear-gradient(135deg, #1a1a1a 0%, #000000 100%);
            border-color: #404040;
            color: #ffffff !important;
        }

        .table-dark th {
            background: #2d2d2d;
            color: #ffffff !important;
            border-color: #404040;
            font-weight: 600;
        }

        .table-dark td {
            color: #ffffff !important;
            border-color: #404040;
        }

        .table-striped>tbody>tr:nth-of-type(odd)>td {
            background: rgba(64, 64, 64, 0.5) !important;
            color: #ffffff !important;
        }

        .table-striped>tbody>tr:nth-of-type(even)>td {
            background: rgba(45, 45, 45, 0.3) !important;
            color: #ffffff !important;
        }

        .table {
            color: #ffffff !important;
            border-color: #404040;
        }

        .table td,
        .table th {
            border-color: #404040;
            padding: 12px 8px;
            color: #ffffff !important;
        }

        .table tbody tr:hover {
            background: rgba(255, 107, 53, 0.1) !important;
        }

        .table tbody tr:hover td {
            color: #ffffff !important;
        }

        .table strong {
            color: #ffffff;
            font-weight: 600;
        }

        .table small {
            color: #bdc3c7;
        }

        .modal-body strong {
            color: #ff6b35;
        }

        .modal-body span:not(.badge) {
            color: #ecf0f1;
        }

        .alert-danger {
            background: linear-gradient(135deg, #2d1b1b 0%, #1a1a1a 100%);
            border-color: #c0392b;
            color: #e74c3c;
        }

        .spinner-border-primary {
            color: #ff6b35;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #404040 0%, #2d2d2d 100%);
            border-color: #404040;
            color: #ecf0f1;
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #ff6b35 0%, #e55a2b 100%);
            border-color: #ff6b35;
            color: #ffffff;
        }

        .modal-footer {
            border-top: 2px solid #404040;
            background: linear-gradient(135deg, #2d2d2d 0%, #1a1a1a 100%);
        }

        /* Custom checkbox styling for dark theme */
        .form-check-input {
            background-color: #1a1a1a !important;
            border: 2px solid #404040 !important;
            border-radius: 4px !important;
        }

        .form-check-input:checked {
            background-color: #ff6b35 !important;
            border-color: #ff6b35 !important;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3e%3cpath fill='none' stroke='%23fff' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='m6 10 3 3 6-6'/%3e%3c/svg%3e") !important;
        }

        .form-check-input:focus {
            border-color: #ff6b35 !important;
            box-shadow: 0 0 0 0.25rem rgba(255, 107, 53, 0.25) !important;
        }

        /* Comedian Modal Sports Car Styling */
        #comedianTableBody input {
            background: linear-gradient(135deg, #2d2d2d 0%, #404040 100%) !important;
            border: 2px solid #ff6600 !important;
            color: #ffffff !important;
            border-radius: 8px !important;
            padding: 10px 15px !important;
            font-size: 15px !important;
            font-weight: 500 !important;
            transition: all 0.3s ease !important;
        }

        #comedianTableBody input:focus {
            background: linear-gradient(135deg, #404040 0%, #555555 100%) !important;
            border-color: #ff8533 !important;
            box-shadow: 0 0 15px rgba(255, 102, 0, 0.6) !important;
            transform: scale(1.02) !important;
        }

        #comedianTableBody .form-check-input {
            background: linear-gradient(135deg, #333333 0%, #444444 100%) !important;
            border: 3px solid #ff6600 !important;
            border-radius: 6px !important;
            width: 24px !important;
            height: 24px !important;
            cursor: pointer !important;
        }

        #comedianTableBody .form-check-input:checked {
            background: linear-gradient(45deg, #ff6600, #ff8533) !important;
            border-color: #ff6600 !important;
            box-shadow: 0 0 10px rgba(255, 102, 0, 0.8) !important;
        }

        #comedianTableBody .btn-danger {
            background: linear-gradient(45deg, #dc3545, #e55661) !important;
            border: 2px solid #dc3545 !important;
            border-radius: 25px !important;
            padding: 8px 16px !important;
            font-weight: 600 !important;
            box-shadow: 0 4px 12px rgba(220, 53, 69, 0.4) !important;
            transition: all 0.3s ease !important;
        }

        #comedianTableBody .btn-danger:hover {
            transform: translateY(-3px) !important;
            box-shadow: 0 8px 20px rgba(220, 53, 69, 0.6) !important;
            background: linear-gradient(45deg, #c82333, #dc3545) !important;
        }

        #comedianTableBody tr {
            background: linear-gradient(135deg, #2d2d2d 0%, #404040 100%) !important;
            border-bottom: 2px solid #ff6600 !important;
            transition: all 0.3s ease !important;
        }

        #comedianTableBody tr:hover {
            background: linear-gradient(135deg, rgba(255, 102, 0, 0.2) 0%, rgba(255, 133, 51, 0.2) 100%) !important;
            transform: translateY(-2px) !important;
            box-shadow: 0 5px 15px rgba(255, 102, 0, 0.3) !important;
        }

        #comedianTableBody td {
            border: none !important;
            color: #ffffff !important;
            padding: 15px 10px !important;
            vertical-align: middle !important;
            font-weight: 500 !important;
        }

        /* Table container styling */
        .table-responsive {
            border-radius: 12px !important;
            overflow: hidden !important;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4) !important;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%) !important;
        }

        .table {
            margin-bottom: 0 !important;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%) !important;
        }

        /* Comedian Modal Complete Dark Override */
        #comedianModal .modal-content {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%) !important;
        }

        #comedianModal .modal-body {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%) !important;
            color: white !important;
        }

        #comedianModal .table-responsive {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%) !important;
        }

        #comedianModal .table {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%) !important;
        }

        #comedianModal .table thead th {
            background: linear-gradient(135deg, #1a1a1a 0%, #333333 100%) !important;
        }

        #comedianModal .table tbody {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%) !important;
        }

        /* Fix Bootstrap table cell defaults */
        #comedianModal .table td {
            background: transparent !important;
            background-color: transparent !important;
        }

        #comedianModal .table tr {
            background: transparent !important;
            background-color: transparent !important;
        }

        #comedianModal .table tbody tr {
            background: transparent !important;
            background-color: transparent !important;
        }

        /* Override Bootstrap's striped table styling */
        #comedianModal .table-striped tbody tr:nth-of-type(odd) td {
            background: transparent !important;
            background-color: transparent !important;
        }

        #comedianModal .table-striped tbody tr:nth-of-type(even) td {
            background: transparent !important;
            background-color: transparent !important;
        }
    </style>
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-chart-bar me-2"></i>
                Show Analytics Dashboard
            </a>
            <div class="navbar-nav ms-auto">
                <span class="navbar-text">
                    <i class="fas fa-database me-1"></i>
                    <span id="health-status">Checking...</span>
                </span>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <!-- Show Selection Form -->
        <div class="form-section">
            <h5 class="mb-3" style="color: #ff6b35; text-shadow: 0 1px 2px rgba(0,0,0,0.5);">
                <i class="fas fa-search me-2"></i>
                Select Show
            </h5>
            <div class="row">
                <div class="col-md-6">
                    <label for="venue" class="form-label">Venue</label>
                    <select class="form-select form-select-sm" id="venue" required>
                        <option value="">Select a venue...</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label for="show-date" class="form-label">Show Date</label>
                    <select class="form-select form-select-sm" id="show-date" required disabled>
                        <option value="">Select a show date...</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Loading State -->
        <div id="loading" class="loading" style="display: none;">
            <div class="spinner-border text-primary me-2" role="status"></div>
            Loading show data...
        </div>

        <!-- Error State -->
        <div id="error" class="error" style="display: none;"></div>

        <!-- Results Section -->
        <div id="results" style="display: none;">
            <!-- Show Details Header -->
            <div class="show-header">
                <h6 class="show-title" id="show-title">Show Breakdown</h6>
                <p class="show-subtitle" id="show-subtitle">Select a show to view analytics</p>
            </div>

            <!-- Summary Cards -->
            <div class="row">
                <div class="col-lg-2 col-md-4 col-sm-6">
                    <div class="card tickets-card compact-card" style="cursor: pointer;" onclick="showGuestDetails()">
                        <div class="text-center">
                            <i class="fas fa-ticket-alt mb-1"></i>
                            <div class="stat-number" id="total-tickets">0</div>
                            <div class="stat-label">Total Tickets <small>(click for details)</small></div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-md-4 col-sm-6">
                    <div class="card stat-card compact-card"
                        style="cursor: pointer; -webkit-tap-highlight-color: rgba(0,0,0,0.1);"
                        onclick="showRevenueBreakdown()" ontouchend="this.click()"
                        title="Net Revenue: Money after payment processor fees">
                        <div class="text-center">
                            <i class="fas fa-dollar-sign mb-1"></i>
                            <div class="stat-number" id="total-revenue">$0</div>
                            <div class="stat-label">Net Revenue</div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-md-4 col-sm-6" id="venue-cost-container">
                    <div class="card venue-cost-card compact-card">
                        <div class="text-center">
                            <i class="fas fa-building mb-1"></i>
                            <div class="stat-number" id="venue-cost">$0</div>
                            <div class="stat-label" id="venue-cost-label">Venue Cost</div>
                            <div class="mt-2">
                                <div class="form-check d-inline-flex align-items-center" style="margin-bottom: 12px;">
                                    <input type="checkbox" class="form-check-input me-3" id="venue-paid-checkbox"
                                        onchange="updateVenuePaymentStatus(this.checked)"
                                        style="transform: scale(1.5); cursor: pointer;">
                                    <label class="form-check-label"
                                        style="color: #ecf0f1; font-size: 1.1em; font-weight: 500; cursor: pointer; padding: 8px 12px; border-radius: 6px; background: rgba(255,255,255,0.1);"
                                        id="venue-paid-label" for="venue-paid-checkbox">
                                        Paid
                                    </label>
                                </div>
                                <div class="mt-2" id="door-split-pay-section" style="display: none;">
                                    <button type="button" class="btn"
                                        style="background: linear-gradient(135deg, #6C1D45 0%, #8E2356 100%); border: none; color: white; font-size: 1.1em; font-weight: 600; padding: 12px 24px; border-radius: 8px; box-shadow: 0 4px 12px rgba(140, 29, 69, 0.3); transition: all 0.2s ease; min-width: 140px;"
                                        onclick="payDoorSplit()" title="Pay door split via Zelle"
                                        onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 16px rgba(140, 29, 69, 0.4)'"
                                        onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(140, 29, 69, 0.3)'">
                                        <svg width="20" height="20" viewBox="0 0 24 24"
                                            style="margin-right: 8px; vertical-align: middle;" fill="white">
                                            <path
                                                d="M23.43 12.83c-.18-.17-.42-.26-.66-.26H17c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h5.77c.24 0 .48-.09.66-.26.17-.17.26-.41.26-.66V8.83c0-.25-.09-.49-.26-.66-.18-.17-.42-.26-.66-.26H17c-1.51 0-2.75 1.24-2.75 2.75s1.24 2.75 2.75 2.75h5.77c.24 0 .48.09.66.26.17.17.26.41.26.66v1.32c0 .25-.09.49-.26.66zM12 5c-3.86 0-7 3.14-7 7s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm0 12c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z" />
                                        </svg>
                                        Zelle
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-md-4 col-sm-6">
                    <div class="card comedian-cost-card compact-card" style="cursor: pointer;" onclick="showComedianManager()">
                        <div class="text-center">
                            <i class="fas fa-microphone mb-1"></i>
                            <div class="stat-number" id="comedian-cost">$0</div>
                            <div class="stat-label">Comedian Costs <small>(click to manage)</small></div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-md-4 col-sm-6">
                    <div class="card net-revenue-card compact-card"
                        title="Total Profit: Money after payment fees and all expenses">
                        <div class="text-center">
                            <i class="fas fa-hand-holding-usd mb-1"></i>
                            <div class="stat-number" id="net-revenue">$0</div>
                            <div class="stat-label">Total Profit</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Row -->
            <div class="row">
                <!-- Revenue by Source -->
                <div class="col-md-6">
                    <div class="card compact-card">
                        <div class="chart-title">
                            <i class="fas fa-chart-pie me-1"></i>
                            Revenue by Source
                        </div>
                        <div class="chart-container compact-chart">
                            <canvas id="revenue-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Guest Details Modal -->
    <div class="modal fade" id="guestDetailsModal" tabindex="-1" aria-labelledby="guestDetailsModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="guestDetailsModalLabel">
                        <i class="fas fa-users me-2"></i>
                        Guest Details
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Loading state -->
                    <div id="guest-loading" class="text-center py-4" style="display: none;">
                        <div class="spinner-border text-primary me-2" role="status"></div>
                        Loading guest details...
                    </div>

                    <!-- Error state -->
                    <div id="guest-error" class="alert alert-danger" style="display: none;"></div>

                    <!-- Guest details content -->
                    <div id="guest-details-content" style="display: none;">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <strong>Show:</strong> <span id="guest-show-title"></span>
                            </div>
                            <div class="col-md-6">
                                <strong>Total:</strong> <span id="guest-summary"></span>
                            </div>
                        </div>

                        <div class="table-responsive">
                            <table class="table table-dark table-sm table-striped">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Email</th>
                                        <th>Tickets</th>
                                        <th>Source</th>
                                        <th>Price</th>
                                        <th>Discount</th>
                                    </tr>
                                </thead>
                                <tbody id="guest-table-body">
                                    <!-- Guest rows will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Simple Comedian Modal -->
    <div class="modal fade" id="comedianModal" tabindex="-1" aria-labelledby="comedianModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content" style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%); border: none; border-radius: 15px; box-shadow: 0 20px 60px rgba(255, 107, 53, 0.3);">
                <div class="modal-header" style="background: linear-gradient(135deg, #ff6b35 0%, #e55a2b 100%); color: white; border-bottom: none; border-radius: 15px 15px 0 0; padding: 1.5rem;">
                    <h5 class="modal-title" id="comedianModalTitle" style="color: white; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); font-weight: 600;">
                        <i class="fas fa-microphone me-2" style="color: #fff; text-shadow: 0 0 10px rgba(255,255,255,0.8);"></i>
                        Manage Comedians
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close" style="filter: brightness(0) invert(1);"></button>
                </div>
                <div class="modal-body" style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%) !important; border: none !important; color: white !important;">
                    <div class="mb-3">
                        <button type="button" class="btn" onclick="window.comedianManager.addComedianRow()"
                                style="background: linear-gradient(45deg, #ff6600, #ff8533); 
                                       border: 2px solid #ff6600; 
                                       color: white; 
                                       border-radius: 25px; 
                                       padding: 8px 16px;
                                       box-shadow: 0 4px 15px rgba(255, 102, 0, 0.3);
                                       transition: all 0.3s ease;">
                            <i class="fas fa-plus me-1"></i>
                            Add Comedian
                        </button>
                    </div>
                    <div class="table-responsive" style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%) !important; border-radius: 12px; overflow: hidden;">
                        <table class="table" style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%) !important; border: none !important; margin: 0 !important;">
                            <thead>
                                <tr style="background: linear-gradient(135deg, #1a1a1a 0%, #333333 100%) !important; 
                                           border: 3px solid #ff6600 !important;
                                           box-shadow: 0 4px 15px rgba(255, 102, 0, 0.4) !important;">
                                    <th style="color: #ff6600 !important; font-weight: 800 !important; border: none !important; padding: 18px 12px !important; 
                                              font-size: 16px !important; letter-spacing: 0.5px !important; text-transform: uppercase !important;
                                              text-shadow: 0 0 10px rgba(255, 102, 0, 0.8) !important; background: transparent !important;">Name</th>
                                    <th style="color: #ff6600 !important; font-weight: 800 !important; border: none !important; padding: 18px 12px !important; 
                                              font-size: 16px !important; letter-spacing: 0.5px !important; text-transform: uppercase !important;
                                              text-shadow: 0 0 10px rgba(255, 102, 0, 0.8) !important; background: transparent !important;">Payment ($)</th>
                                    <th style="color: #ff6600 !important; font-weight: 800 !important; border: none !important; padding: 18px 12px !important; 
                                              font-size: 16px !important; letter-spacing: 0.5px !important; text-transform: uppercase !important;
                                              text-shadow: 0 0 10px rgba(255, 102, 0, 0.8) !important; background: transparent !important;">Handle</th>
                                    <th style="color: #ff6600 !important; font-weight: 800 !important; border: none !important; padding: 18px 12px !important; 
                                              font-size: 16px !important; letter-spacing: 0.5px !important; text-transform: uppercase !important;
                                              text-shadow: 0 0 10px rgba(255, 102, 0, 0.8) !important; background: transparent !important;">Paid</th>
                                    <th style="color: #ff6600 !important; font-weight: 800 !important; border: none !important; padding: 18px 12px !important; 
                                              font-size: 16px !important; letter-spacing: 0.5px !important; text-transform: uppercase !important;
                                              text-shadow: 0 0 10px rgba(255, 102, 0, 0.8) !important; background: transparent !important;">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="comedianTableBody" style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%) !important;">
                                <!-- Comedian rows will be added here -->
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-3" style="background: linear-gradient(45deg, #333333, #444444); 
                                           padding: 12px; 
                                           border-radius: 10px; 
                                           border: 2px solid #ff6600;">
                        <strong style="color: #ff6600; font-size: 1.1em;">Total: $<span id="totalComedianCost">0</span></strong>
                    </div>
                </div>
                <div class="modal-footer" style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%); 
                                                border-top: 2px solid #ff6600;">
                    <button type="button" class="btn" onclick="window.comedianManager.saveAndClose()"
                            style="background: linear-gradient(45deg, #28a745, #34ce57); 
                                   border: 2px solid #28a745; 
                                   color: white; 
                                   border-radius: 25px; 
                                   padding: 10px 20px;
                                   box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
                                   transition: all 0.3s ease;">
                        <i class="fas fa-save me-1"></i>
                        Save and Close
                    </button>
                </div>
            </div>
        </div>
    </div>



    <!-- Revenue & Fee Analysis Modal -->
    <div class="modal fade" id="revenueBreakdownModal" tabindex="-1" aria-labelledby="revenueBreakdownModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content" style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%); border: none; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.5);">
                <div class="modal-header" style="background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); color: white; border-bottom: none; border-radius: 20px 20px 0 0; padding: 1.5rem;">
                    <h5 class="modal-title" id="revenueBreakdownModalLabel" style="color: white; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); font-weight: 600; font-size: 1.4rem;">
                        <i class="fas fa-chart-line me-3" style="color: #ff6b35; font-size: 1.2rem;"></i> Revenue & Fee Analysis
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close" style="filter: brightness(0) invert(1);"></button>
                </div>
                <div class="modal-body" style="max-height: 80vh; overflow-y: auto; padding: 1.5rem; background: #1a1a1a;">
                    <!-- Revenue by Source (Detailed Breakdown) -->
                    <div class="mb-4">
                        <h6 class="mb-3" style="color: #e9ecef; font-weight: 600; font-size: 1.1rem;">Revenue by Source (Detailed Breakdown)</h6>
                        <div class="mb-3 p-3" style="background: rgba(13, 110, 253, 0.1); border-radius: 10px; border: 1px solid rgba(13, 110, 253, 0.2);">
                            <div class="d-flex justify-content-between align-items-center">
                                <span style="color: #4dabf7; font-weight: 600;">Total Gross Revenue:</span>
                                <span style="color: #4dabf7; font-weight: 700; font-size: 1.1rem;" id="total-gross-revenue">$0</span>
                            </div>
                        </div>
                        <div id="source-breakdown-details">
                            <!-- Source breakdown will be populated here -->
                        </div>
                    </div>

                    <!-- Summary Section -->
                    <div style="height: 2px; background: linear-gradient(90deg, transparent, #ff6b35, transparent); margin: 2rem 0; border-radius: 2px;"></div>
                    
                    <div class="mb-4">
                        <h6 class="mb-3" style="color: #e9ecef; font-weight: 600; font-size: 1.1rem;">Summary</h6>
                        
                        <!-- Total Gross Revenue -->
                        <div class="d-flex justify-content-between py-2" style="color: #e9ecef;">
                            <span>Total Gross Revenue:</span>
                            <span style="font-weight: 600;" id="summary-gross-revenue">$0</span>
                        </div>
                        
                        <!-- Total Processing Fees -->
                        <div class="d-flex justify-content-between py-2" style="color: #fd7e83;">
                            <span>Total Processing Fees:</span>
                            <span style="font-weight: 600;" id="summary-processing-fees">-$0</span>
                        </div>
                        
                        <!-- Net Revenue After Fees -->
                        <div class="d-flex justify-content-between py-2 mb-2" style="color: #51cf66; border-bottom: 1px solid rgba(255,255,255,0.1);">
                            <span style="font-weight: 600;">Net Revenue After Fees:</span>
                            <span style="font-weight: 700;" id="summary-net-revenue">$0</span>
                        </div>
                        
                        <!-- Venue Share -->
                        <div class="d-flex justify-content-between py-2" style="color: #fd7e83;">
                            <span>Venue Share (30%):</span>
                            <span style="font-weight: 600;" id="summary-venue-share">-$0</span>
                        </div>
                        
                        <!-- Final Net Revenue -->
                        <div class="d-flex justify-content-between py-3 mt-3" style="background: rgba(25, 135, 84, 0.15); border-radius: 10px; padding: 1rem !important; border: 1px solid rgba(25, 135, 84, 0.2);">
                            <span style="color: #51cf66; font-weight: 600; font-size: 1.1rem;">Final Net Revenue:</span>
                            <span style="color: #51cf66; font-weight: 700; font-size: 1.2rem;" id="summary-final-net">$0</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer" style="background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); border-top: none; border-radius: 0 0 20px 20px; padding: 1rem 1.5rem;">
                    <button type="button" class="btn" data-bs-dismiss="modal" style="background: linear-gradient(135deg, #6c757d, #495057); color: white; border: none; border-radius: 10px; padding: 0.75rem 1.5rem; font-weight: 500;">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>